<script type="template/html" id="Setup-Instructions">{{ section.settings.virtualGuide }}</script>

{% schema %}
  {
    "name": "Setup Instructions",
    "settings": [  {
        "type": "checkbox",
        "id": "virtualGuide",
        "label": "Show Virtual Guide",
        "default": true
      },
           {
        "type": "paragraph",
"content": "When this guide is completed, get more advanced tips and complete setup [Click Here](https://digitalbrandz.marketing/pages/tutorials)"
      }

]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}



$(document).on("shopify:section:select", function(e){

var type = 'Setup-Instructions';
var EditClass = 'editSetup';


var dataset = e.target.dataset;
var dataset = JSON.parse(dataset[Object.keys(dataset)[0]]);
var sectionType = dataset['type'];
var sectionId = dataset['id'];
var eventSectionId = e.target.id.replace('shopify-section-','');
if(sectionType == type && sectionId == eventSectionId) {







var body =  document.getElementsByTagName("body")[0];
body.classList.add('editing', EditClass);
$(document).one("shopify:section:deselect",function(e){
body.classList.remove(EditClass);
})

$(document).one("shopify:section:load",function(e){
if (window.location !== window.parent.location) {	 
  var virtualGuide = document.querySelector("#Setup-Instructions");
  if(virtualGuide.innerHTML == 'true') {
    console.log('start guide');
    startGuide();
  }else{
   console.log('remove guide');
   var guideWrapEl = document.querySelector('#guideWrap');
   guideWrapEl.remove();
  }
}
})


}




});   

if (window.location !== window.parent.location) {	  
  var virtualGuide = document.querySelector("#Setup-Instructions");
  if(virtualGuide.innerHTML == 'true') {
    console.log('start guide');
    startGuide();
  }else{
   console.log('remove guide');
   var guideWrapEl = document.querySelector('#guideWrap');
   guideWrapEl.remove();
  }
}

function startGuide() {

document.body.classList.add('virtualGuide'); 
  
  
var stringToHTML = function (str) {
		var parser = new DOMParser();
		var doc = parser.parseFromString(str, 'text/html');
		return doc.body.children[0];
}; 
  
 
var guideWrapEl = document.querySelector('#guideWrap');
var filters = '?modestbranding=1&VQ=HD1080';  
if(!guideWrapEl) {  
   document.body.prepend(stringToHTML('<div id="guideWrap"><h2>Overview</h2><div class="flex-video youtube widescreen"><iframe width="1920" height="1080" src="https://www.youtube.com/embed/qJsRdVNCcn4'+ filters +'" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>'));
}  
  
 
}

{% endjavascript %}               
